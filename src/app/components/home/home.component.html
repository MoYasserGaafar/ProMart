<app-slider></app-slider>
<app-category-slider></app-category-slider>

<div class="container my-5">
    <input [(ngModel)]="term" type="text" class="form-control w-75 m-auto my-5" placeholder="Search for Products" >
    <div class="row">
        @for (product of allProducts|search: term; track $index) {
        <div class="col-md-2">
            <div class="product p-2">
                <div [routerLink]="'/details/'+product._id">
                    <img [src]="product.imageCover" class="w-100" alt="">
                    <h6 class="text-main mt-2">{{product.category.name|uppercase}}</h6>
                    <h5 class="fw-bold">{{product.title.split(' ').slice(0,2).join(' ')|titlecase}}...</h5> 
                    <div class="d-flex justify-content-between">
                        <span>{{product.price|currency:'EGP'}}</span> 
                        <span>
                            <i class="fa-solid fa-star rating-color"></i> <!-- Fontawesome's Star Icon -->
                            {{product.ratingsAverage}}
                        </span>
                    </div>
                    <p class="text-danger my-3">{{product.quantity|soldOut:50}}</p> 
                </div>
                <div class="d-flex justify-content-center align-items-center gap-2">
                    <button (click)="addToCart(product._id)" class="btn bg-main text-white w-100 my-2"><i class="fa-solid fa-cart-plus"></i></button>
                    
                    @if (!wishlistData.includes(product._id)) {
                    <button (click)="addToWishlist(product._id)" class="btn text-main">
                        <i class="fa-regular fa-heart fa-2x"></i>
                    </button>
                    }
                    @if (wishlistData.includes(product._id)) {
                        <button (click)="removeFromWishlist(product._id)" class="btn text-danger">
                            <i class="fa-solid fa-heart fa-2x"></i>
                        </button>
                    }
                </div>

            </div>
        </div>
        }
    </div>
</div>